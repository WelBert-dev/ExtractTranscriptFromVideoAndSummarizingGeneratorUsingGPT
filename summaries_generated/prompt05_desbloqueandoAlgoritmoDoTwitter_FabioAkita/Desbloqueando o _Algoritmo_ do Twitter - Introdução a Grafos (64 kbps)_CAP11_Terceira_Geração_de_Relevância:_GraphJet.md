# Resumo do Capítulo 11 - "Terceira Geração de Relevância: GraphJet"

## Limitações do Motor de Recomendação Anterior
No vídeo, é mencionado que o segundo motor de recomendação utilizado pelo Twitter tinha algumas limitações. Ele era capaz de recomendar usuários similares para seguir, mas só atualizava poucas vezes ao dia, não sendo em tempo real como a aba de recomendação presente no Twitter atualmente. Esse motor não atendia às demandas de tempo real e não oferecia a mesma experiência disponível hoje.

## Estratégias de Particionamento e Organização de Grafos
Em 2014, um novo paper descreveu algumas estratégias para particionar e organizar os grafos do Twitter. No caso do Twitter e sistemas de mensageria em geral, não é necessário ter o grafo completo dos usuários. Por exemplo, a maioria das pessoas não está interessada em ver tweets com mais de um ou dois dias das pessoas que seguem. Portanto, é possível limitar uma janela de tempo e lidar com um subgrafo muito menor. Essa abordagem evita operações como deletar um tweet do grafo, em vez disso, estabelece-se uma janela de tempo para que os dados expirem naturalmente, seguindo uma prática comum em caching. Além disso, não é necessário armazenar o timestamp exato de cada tweet no grafo, pois a maioria das interações ocorre logo após o tweet ser criado. Para a maioria dos usuários, é suficiente saber que um tweet foi postado há uma hora, cinco horas ou um dia, sem precisar do timestamp exato.

## GraphJet: Motor de Recomendação da Terceira Geração
Com base no conhecimento adquirido até então, o Twitter iniciou o desenvolvimento de um terceiro motor de recomendação chamado GraphJet. Esse motor utiliza um grafo bipartido que registra as interações dos usuários com os tweets nas últimas "n" horas. O GraphJet possui uma API simples que oferece apenas as operações necessárias, evitando a complexidade de criar um banco de dados de grafos genérico demais. O paper mencionado no vídeo detalha a estratégia de mapeamento de IDs, o gerenciamento de memória para equilibrar o reembaralhamento e a distribuição dos dados. Como resultado, o processamento para encontrar usuários e tweets recomendados foi otimizado, alcançando tempos de resposta abaixo de 10ms, aproximando-se do tempo real. O principal gargalo identificado foi a comunicação com os diversos sistemas de filas utilizados, como a Paixa e Cáfica, que ainda são utilizados até hoje.